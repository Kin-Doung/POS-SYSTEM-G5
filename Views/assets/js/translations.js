const translations = {
    en: {
        // Navbar
        'Welcome to Engly Store': 'Welcome to Engly Store',
        'Search': 'Search',
        'Owner Store': 'Owner Store',
        'Account': 'Account',
        'Setting': 'Setting',
        'Logout': 'Logout',
        'English': 'English',
        'Khmer': 'Khmer',

        // Sidebar
        'Dashboard': 'Dashboard',
        'Products': 'Products',
        'Inventory': 'Inventory',
        'Order': 'Order',
        'Report': 'Report',
        'Profit_Loss': 'Profit & Loss',
        'Stock tracking': 'Stock Tracking',
        'Categories': 'Categories',
        'Notifications': 'Notifications',
        'Calendar': 'Calendar',
        'Log Out': 'Log Out',
        'Engly POS v1.0': 'Engly POS v1.0',

        // Dashboard
        'Profit': 'Profit',
        'New (Client)': 'New (Client)',
        'Incoming': 'Incoming',
        'Expenses': 'Expenses',
        'Today': 'Today',
        'This Week': 'This Week',
        'This Month': 'This Month',
        'Earnings Overview': 'Earnings Overview',
        'Products (Stock Status)': 'Products (Stock Status)',
        'Low (0-9)': 'Low (0-9)',
        'Medium (10-49)': 'Medium (10-49)',
        'High (50+)': 'High (50+)',
        'Total Items': 'Total Items',
        'Processing Complete': 'Processing Complete',
        'Done!': 'Done!',
        'created by G5 team & PNC student 2025': 'Created by G5 Team & PNC Student 2025',

        // Inventory
        'Restock Products': 'Restock Products',
        'Add Stocks': 'Add Stocks',
        'Select Category': 'Select Category',
        'No Categories Found': 'No Categories Found',
        'View': 'View',
        'Edit': 'Edit',
        'Delete': 'Delete',
        'View Inventory Item': 'View Inventory Item',
        'Product Name': 'Product Name',
        'Category': 'Category',
        'Quantity': 'Quantity',
        'Price': 'Price',
        'Total Price': 'Total Price',
        'Delete Item': 'Delete Item',
        'Edit Product': 'Edit Product',
        'Update': 'Update',
        'Update Quantity': 'Update Quantity',
        'Update Selected Quantities': 'Update Selected Quantities',
        'Select': 'Select',
        'Expiration Date': 'Expiration Date',
        'Selling Price': 'Selling Price',
        'Barcode': 'Barcode',
        'Image': 'Image',
    },
    km: {
        // Navbar
        'Welcome to Engly Store': 'សូមស្វាគមន៍មកកាន់ហាង Engly',
        'Search': 'ស្វែងរក',
        'Owner Store': 'ម្ចាស់ហាង',
        'Account': 'គណនី',
        'Setting': 'ការកំណត់',
        'Logout': 'ចាកចេញ',
        'English': 'អង់គ្លេស',
        'Khmer': 'ខ្មែរ',

        // Sidebar
        'Dashboard': 'ផ្ទាំងគ្រប់គ្រង',
        'Products': 'ផលិតផល',
        'Inventory': 'ស្តុកទំនិញ',
        'Order': 'ការបញ្ជាទិញ',
        'Report': 'របាយការណ៍',
        'Profit_Loss': 'ប្រាក់ចំណេញ និង ខាត',
        'Stock tracking': 'តាមដានស្តុក',
        'Categories': 'ប្រភេទ',
        'Notifications': 'ការជូនដំណឹង',
        'Calendar': 'ប្រតិទិន',
        'Account': 'គណនី',
        'Log Out': 'ចាកចេញ',
        'Engly POS v1.0': 'Engly POS កំណែ ១.០',

        // Dashboard
        'Profit': 'ប្រាក់ចំណេញ',
        'New (Client)': 'អតិថិជនថ្មី',
        'Incoming': 'ចំណូល',
        'Expenses': 'ចំណាយ',
        'Today': 'ថ្ងៃនេះ',
        'This Week': 'សប្តាហ៍នេះ',
        'This Month': 'ខែនេះ',
        'Earnings Overview': 'ទិដ្ឋភាពចំណូល',
        'Products (Stock Status)': 'ផលិតផល (ស្ថានភាពស្តុក)',
        'Low (0-9)': 'ទាប (០-៩)',
        'Medium (10-49)': 'មធ្យម (១ៀ-៤៩)',
        'High (50+)': 'ខ្ពស់ (៥០+)',
        'Total Items': 'ធាតុសរុប',
        'Processing Complete': 'ការដំណើរការបញ្ចប់',
        'Done!': 'រួចរាល់!',
        'created by G5 team & PNC student 2025': 'បង្កើតដោយក្រុម G5 និងនិស្សិត PNC ឆ្នាំ២០២៥',

        // Inventory
        'Restock Products': 'បំពេញស្តុកផលិតផល',
        'Add Stocks': 'បន្ថែមស្តុក',
        'Select Category': 'ជ្រើសរើសប្រភេទ',
        'No Categories Found': 'រកមិនឃើញប្រភេទ',
        'View': 'មើល',
        'Edit': 'កែសម្រួល',
        'Delete': 'លុប',
        'View Inventory Item': 'មើលធាតុស្តុក',
        'Product Name': 'ឈ្មោះផលិតផល',
        'Category': 'ប្រភេទ',
        'Quantity': 'បរិមាណ',
        'Price': 'តម្លៃ',
        'Total Price': 'តម្លៃសរុប',
        'Delete Item': 'លុបធាតុ',
        'Edit Product': 'កែសម្រួលផលិតផល',
        'Update': 'ធ្វើបច្ចុប្បន្នភាព',
        'Update Quantity': 'ធ្វើបច្ចុប្បន្នភាពបរិមាណ',
        'Update Selected Quantities': 'ធ្វើបច្ចុប្បន្នភាពបរិមាណដែលបានជ្រើស',
        'Select': 'ជ្រើសរើស',
        'Expiration Date': 'កាលបរិច្ឆេទផុតកំណត់',
        'Selling Price': 'តម្លៃលក់',
        'Barcode': 'បាកូដ',
        'Image': 'រូបភាព',
    }
};

function applyTranslations(lang) {
    // Update current language display
    document.getElementById('currentLanguage').textContent = translations[lang]['English'];

    // Update text content for elements with data-translate-key
    document.querySelectorAll('[data-translate-key]').forEach(element => {
        const key = element.getAttribute('data-translate-key');
        if (translations[lang][key]) {
            if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                element.placeholder = translations[lang][key];
            } else if (element.tagName === 'OPTION') {
                element.textContent = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });

    // Update category select option
    const categorySelect = document.getElementById('categorySelect');
    if (categorySelect) {
        categorySelect.querySelector('option[value=""]').textContent = translations[lang]['Select Category'];
    }

    // Show notification
    showTranslationNotification(lang);

    // Store selected language
    localStorage.setItem('selectedLanguage', lang);
}

function showTranslationNotification(lang) {
    // Remove any existing notification
    const existingNotification = document.getElementById('translationNotification');
    if (existingNotification) {
        existingNotification.remove();
    }

    // Create notification element
    const notification = document.createElement('div');
    notification.id = 'translationNotification';
    notification.className = 'alert alert-info alert-dismissible fade show';
    notification.style.position = 'fixed';
    notification.style.top = '20px';
    notification.style.right = '20px';
    notification.style.zIndex = '10000';
    notification.innerHTML = `
        ${translations[lang]['Language Changed']}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    `;

    // Append to body
    document.body.appendChild(notification);

    // Auto-dismiss after 3 seconds
    setTimeout(() => {
        notification.classList.remove('show');
        notification.classList.add('fade');
        setTimeout(() => notification.remove(), 150); // Wait for fade transition
    }, 3000);
}

document.addEventListener('DOMContentLoaded', () => {
    // Load saved language or default to English
    const savedLang = localStorage.getItem('selectedLanguage') || 'en';
    applyTranslations(savedLang);

    // Handle language selection
    document.querySelectorAll('[data-lang]').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const lang = link.getAttribute('data-lang');
            applyTranslations(lang);
        });
    });
});


