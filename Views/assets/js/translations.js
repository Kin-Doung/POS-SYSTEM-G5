const translations = {
    en: {
        // Navbar
        "Welcome to Engly Store": "Welcome to Engly Store",
        Search: "Search",
        "Owner Store": "Owner Store",
        Account: "Account",
        Setting: "Setting",
        Logout: "Logout",
        English: "English",
        Khmer: "Khmer",

        // Sidebar
        Dashboard: "Dashboard",
        Products: "Products",
        Inventory: "Inventory",
        Order: "Order",
        Report: "Report",
        Profit_Loss: "Profit & Loss",
        "Stock tracking": "Stock Tracking",
        Categories: "Categories",
        Notifications: "Notifications",
        Calendar: "Calendar",
        "Log Out": "Log Out",
        "Engly POS v1.0": "Engly POS v1.0",

        // Dashboard
        Profit: "Profit",
        "New (Client)": "New (Client)",
        Incoming: "Incoming",
        Expenses: "Expenses",
        Today: "Today",
        "This Week": "This Week",
        "This Month": "This Month",
        "Earnings Overview": "Earnings Overview",
        "Products (Stock Status)": "Products (Stock Status)",
        "Low (0-9)": "Low (0-9)",
        "Medium (10-49)": "Medium (10-49)",
        "High (50+)": "High (50+)",
        "Total Items": "Total Items",
        "Processing Complete": "Processing Complete",
        "Done!": "Done!",
        "created by G5 team & PNC student 2025":
            "Created by G5 Team & PNC Student 2025",
        This_Month:"ខែនេះ",



            // Inventory
            "Restock Products": "Restock Products",
        "Add Stocks": "Add Stocks",
        "Select Category": "Select Category",
        "No Categories Found": "No Categories Found",
        "View Inventory Item": "View Inventory Item",
        "Product Name": "Product Name",
        Category: "Category",
        Quantity: "Quantity",
        Price: "Price",
        "Total Price": "Total Price",

        "Edit Product": "Edit Product",
        Update: "Update",
        "Update Quantity": "Update Quantity",
        "Update Selected Quantities": "Update Selected Quantities",
        Select: "Select",
        "Expiration Date": "Expiration Date",
        "Selling Price": "Selling Price",
        Barcode: "Barcode",
        Image: "Image",
        Purchasing_Orders: "Purchasing Orders",
        Add_Products: "+ Add Products",
        Action: "Action",
        No_Purchases_Found: "No purchases found.",
        Delete_Selected_Product: "Delete Selected Product",
        Confirm_Bulk_Delete:
            "Are you sure that you want to delete the selected all products?",
        Delete_Selected: "Delete Selected",
        Confirm_Delete_Item: "Are you sure you want to delete this item?",

        // products
        Preview_Invoice: "Preview Invoice",
        Submit: "Submit",
        Add_More: "Add More",
        EXPORT_TO_PDF: "EXPORT TO PDF",
        Invoice_Preview: "Invoice Preview",
        Remove: "Remove",
        Purchasing_Orders: "Purchasing Orders",
        // Order Products
        Order_Products: "Order Products",
        POS_Payout: "POS_Payout",
        Item: "Item",
        Qty: "Qty",

        // New keys for Reports page
        Filter_All: "Filter all",
        Last_Week: "Last Week",
        Last_Month: "Last Month",
        Date_Range: "Date Range",
        Select_Date_Range: "Select date range...",
        Search_Placeholder: "search...",
        Date_of_Sale: "Date of Sale",
        Select_All: "Select All",
        No_Records_Found: "No records found",
        Product_Deleted_Successfully: "Product deleted successfully",
        Product_Updated_Successfully: "Product updated successfully",
        Items_Deleted_Successfully: "item(s) deleted successfully",
        Confirm_Delete_Items: "Are you sure you want to delete the selected items?",
        Confirm_Delete_Single_Item: "Are you sure you want to delete this item?",
        Yes: "Yes",
        No: "No",

        Failed_To_Fetch_Data: "Failed to fetch data",
        Error_Fetching_Data: "Error fetching data",
        Failed_To_Delete: "Failed to delete",
        Error_Deleting_Item: "Error deleting item",
        Failed_To_Fetch_Record: "Failed to fetch record",
        Failed_To_Update: "Failed to update",
        Please_Select_At_Least_One_Item:
            "Please select at least one item to delete.",
        // New keys for Profit & Loss page
        Profit_Loss: "Profit Loss",
        Result_Type: "Result Type",
        No_Profit_Loss_Data_Found: "No profit/loss data found.",
        No_Image: "No Image",
        Loss: "Loss",
        N_A: "N/A",


        CSRF_Token_Missing: "CSRF token missing. Please refresh the page.",
        Invalid_Item_Selected: "Invalid item selected",
        No_Valid_Items_Selected: "No valid items selected",
        Record_Deleted_Successfully: "Record deleted successfully",
        Records_Deleted_Successfully: "Records deleted successfully",
        Deletion_Failed: "Deletion failed",

        // category

        "Add New Categories": "Add New Categories",
        "Create New Category": "Create New Category",
        "Category Name": "Category Name",
        "Add category": "Add category",
        "Edit Category": "Edit Category",
        "Update": "Update", // Already exists, no change needed
        "Category Names": "Category Names",
        "Action": "Action", // Already exists, no change needed
        "Confirm Delete Category": "Are you sure you want to delete this category?",
        "Confirm Bulk Delete Categories": "Are you sure you want to delete the selected categories?",
        "Please Select Categories": "Please select categories to delete.",
        // New keys for settings page
        "Personal Account": "Personal Account",
        "Profile": "Profile",
        "Language": "Language",
        "Username": "Username",
        "Store Name": "Store Name",
        "Password": "Password",
        "Email": "Email",
        "No admin users found": "No admin users found",
        "No Logo": "No Logo",
        // Keys from purchases page
        "Purchasing_Orders": "Purchasing Orders",
        "Add_Products": "Add Products",
        "Image": "Image",
        "Product Name": "Product Name",
        "Action": "Action",
        "No_Purchases_Found": "No purchases found.",
        "Confirm_Bulk_Delete": "Are you sure that you want to delete the selected all products?",

        "No": "No",
        "Delete_Selected": "Delete Selected",
        "Confirm_Delete_Item": "Are you sure you want to delete this item?",

        "Update failed": "Update failed",
        "Bulk delete failed": "Bulk delete failed",
        // From profit_loss_list.php
        "Profit Loss": "Profit Loss",
        "Result Type": "Result Type",
        "Date of Sale": "Date of Sale",
        "Filter all": "Filter all",
        "Today": "Today",
        "This Week": "This Week",
        "Last Week": "Last Week",
        "This Month": "This Month",
        "Last Month": "Last Month",
        "Date Range": "Date Range",
        "Select date range": "Select date range",
        "search": "search",
        "No profit/loss data found": "No profit/loss data found",
        "Total Profit": "Total Profit",
        "Total Loss": "Total Loss",
        "Yes": "Yes",
        "Are you sure you want to delete?": "Are you sure you want to delete?",
        "CSRF token missing": "CSRF token missing. Please refresh the page.",
        "Please select at least one item": "Please select at least one item",
        "No valid items selected": "No valid items selected",
        "Invalid item selected": "Invalid item selected",
        "Records deleted successfully": "Records deleted successfully",
        "Record deleted successfully": "Record deleted successfully",
        "Deletion failed": "Deletion failed",
        "Error": "Error",
        "Page": "Page",
        "of": "of",
        "Previous Page": "Previous Page",
        "Next Page": "Next Page",
        "Profit": "Profit",
        "Loss": "Loss",
        "Product Image": "Product Image",
        "Select All": "Select All",
        "Select item": "Select item",

    },
    km: {
        // Navbar
        "Welcome to Engly Store": "សូមស្វាគមន៍មកកាន់ហាង Engly",
        Search: "ស្វែងរក",
        "Owner Store": "ម្ចាស់ហាង",
        Account: "គណនី",
        Setting: "ការកំណត់",
        Logout: "ចាកចេញ",
        English: "អង់គ្លេស",
        Khmer: "ខ្មែរ",

        // Sidebar
        Dashboard: "ផ្ទាំងគ្រប់គ្រង",
        Products: "ផលិតផល",
        Inventory: "ស្តុកទំនិញ",
        Order: "ការបញ្ជាទិញ",
        Report: "របាយការណ៍",
        Profit_Loss: "ប្រាក់ចំណេញ និង ខាត",
        "Stock tracking": "តាមដានស្តុក",
        Categories: "ប្រភេទ",
        Notifications: "ការជូនដំណឹង",
        Calendar: "ប្រតិទិន",
        Account: "គណនី",
        "Log Out": "ចាកចេញ",
        "Engly POS v1.0": "Engly POS កំណែ ១.០",

        // Dashboard
        Profit: "ប្រាក់ចំណេញ",
        "New (Client)": "អតិថិជនថ្មី",
        Incoming: "ចំណូល",
        Expenses: "ចំណាយ",
        Today: "ថ្ងៃនេះ",
        "This Week": "សប្តាហ៍នេះ",
        "This Month": "ខែនេះ",
        "Earnings Overview": "ទិដ្ឋភាពចំណូល",
        "Products (Stock Status)": "ផលិតផល (ស្ថានភាពស្តុក)",
        "Low (0-9)": "ទាប (០-៩)",
        "Medium (10-49)": "មធ្យម (១០-៤៩)",
        "High (50+)": "ខ្ពស់ (៥០+)",
        "Total Items": "ធាតុសរុប",
        "Processing Complete": "ការដំណើរការបញ្ចប់",
        "Done!": "រួចរាល់!",
        "created by G5 team & PNC student 2025":
            "បង្កើតដោយក្រុម G5 និងនិស្សិត PNC ឆ្នាំ២០២៥",


        // Inventory

        "Restock Products": "បំពេញស្តុកផលិតផល",
        "Add Stocks": "បន្ថែមស្តុក",
        "Select Category": "ជ្រើសរើសប្រភេទ",
        "No Categories Found": "រកមិនឃើញប្រភេទ",
        "View Inventory Item": "មើលធាតុស្តុក",
        "Product Name": "ឈ្មោះផលិតផល",
        Category: "ប្រភេទ",
        Quantity: "បរិមាណ",
        Price: "តម្លៃ",
        "Total Price": "តម្លៃសរុប",

        "Edit Product": "កែសម្រួលផលិតផល",
        Update: "ធ្វើបច្ចុប្បន្នភាព",
        "Update Quantity": "ធ្វើបច្ចុប្បន្នភាពបរិមាណ",
        "Update Selected Quantities": "ធ្វើបច្ចុប្បន្នភាពបរិមាណដែលបានជ្រើស",
        Select: "ជ្រើសរើស",
        "Expiration Date": "កាលបរិច្ឆេទផុតកំណត់",
        "Selling Price": "តម្លៃលក់",
        Barcode: "បាកូដ",
        Image: "រូបភាព",
        Purchasing_Orders: "ការបញ្ជាទិញ",
        Add_Products: "+ បន្ថែមផលិតផល",
        Action: "សកម្មភាព",
        No_Purchases_Found: "រកមិនឃើញការបញ្ជាទិញទេ។",
        Delete_Selected_Product: "លុបផលិតផលដែលបានជ្រើស",
        Confirm_Bulk_Delete: "តើអ្នកប្រាកដទេថាចង់លុបផលិតផលទាំងអស់ដែលបានជ្រើស?",
        Delete_Selected: "លុបផលិតផលដែលបានជ្រើស",
        Confirm_Delete_Item: "តើអ្នកប្រាកដទេថាចង់លុបធាតុនេះ?",

        // products
        Purchasing_Orders: "ការបញ្ជាទិញ",
        Preview_Invoice: "មើលវិក័យប័ត្រជាមុន",
        Submit: "បញ្ជូនទៅ",
        Add_More: "បន្ថែម",
        EXPORT_TO_PDF: "នាំចេញទៅជា PDF",
        Invoice_Preview: "ការមើលវិក័យប័ត្រជាមុន",
        Remove: "លុប",

        // New keys for Order Products page
        Order_Products: "ការបញ្ជាទិញផលិតផល",
        Scan_Or_Enter_Barcode: "ស្កែន ឬ បញ្ចូលបាកូដ",
        Scan_With_Webcam: "ស្កែនជាមួយវែបខេម",
        POS_Payout: "ការទូទាត់ POS",
        Item: "ធាតុ",
        Qty: "បរិមាណ",
        Price_Dollar: "តម្លៃ ($)",
        Total: "សរុប",
        More_Options: "ជម្រើសបន្ថែម",
        Save_PDF: "រក្សាទុក PDF",
        Payout: "ទូទាត់",
        Clear: "សម្អាត",
        Complete_Order: "បញ្ចប់ការបញ្ជាទិញ",
        Order_Completed_Successfully: "ការបញ្ជាទិញបានបញ្ចប់ដោយជោគជ័យ!",
        Barcode_Not_Found: "រកមិនឃើញបាកូដ។",
        Error_Scanning_Barcode: "កំហុសក្នុងការស្កែនបាកូដ។",
        Error_Submitting_Order: "កំហុសក្នុងការដាក់បញ្ជាទិញ។",
        Item_Deleted_Successfully: "ធាតុត្រូវបានលុបដោយជោគជ័យ។",
        Error_Deleting_Item: "កំហុសក្នុងការលុបធាតុ។",
        Failed_To_Access_Webcam: "បរាជ័យក្នុងការចូលប្រើវែបខេម។",
        Add_To_Cart: "បន្ថែមទៅកន្ត្រក",

        // history
        Filter_All: "ត្រងទាំងអស់",
        Last_Week: "សប្តាហ៍មុន",
        Last_Month: "ខែមុន",
        Date_Range: "ជួរកាលបរិច្ឆេទ",
        Select_Date_Range: "ជ្រើសរើសជួរកាលបរិច្ឆេទ...",
        Search_Placeholder: "ស្វែងរក...",
        Date_of_Sale: "កាលបរិច្ឆេទនៃការលក់",
        Select_All: "ជ្រើសរើសទាំងអស់",
        No_Records_Found: "រកមិនឃើញកំណត់ត្រា",
        Product_Deleted_Successfully: "ផលិតផលត្រូវបានលុបដោយជោគជ័យ",
        Product_Updated_Successfully: "ផលិតផលត្រូវបានធ្វើបច្ចុប្បន្នភាពដោយជោគជ័យ",
        Items_Deleted_Successfully: "ធាតុត្រូវបានលុបដោយជោគជ័យ",
        Confirm_Delete_Items: "តើអ្នកប្រាកដទេថាចង់លុបធាតុដែលបានជ្រើស?",
        Confirm_Delete_Single_Item: "តើអ្នកប្រាកដទេថាចង់លុបធាតុនេះ?",
        Yes: "បាទ/ចាស",
        No: "ទេ",


        Failed_To_Fetch_Data: "បរាជ័យក្នុងការទាញទិន្នន័យ",
        Error_Fetching_Data: "កំហុសក្នុងការទាញទិន្នន័យ",
        Failed_To_Delete: "បរាជ័យក្នុងការលុប",
        Error_Deleting_Item: "កំហុសក្នុងការលុបធាតុ",
        Failed_To_Fetch_Record: "បរាជ័យក្នុងការទាញកំណត់ត្រា",
        Failed_To_Update: "បរាជ័យក្នុងការធ្វើបច្ចុប្បន្នភាព",
        Please_Select_At_Least_One_Item: "សូមជ្រើសរើសយ៉ាងហោចណាស់មួយធាតុដើម្បីលុប",
        // From profit_loss_list.php
        "Profit Loss": "ប្រាក់ចំណេញ/ខាត",
        "Result Type": "ប្រភេទលទ្ធផល",
        "Date of Sale": "កាលបរិច្ឆេទនៃការលក់",
        "Filter all": "តម្រងទាំងអស់",
        "Today": "ថ្ងៃនេះ",
        "This Week": "សប្តាហ៍នេះ",
        "Last Week": "សប្តាហ៍មុន",
        "This Month": "ខែនេះ",
        "Last Month": "ខែមុន",
        "Date Range": "ជួរកាលបរិច្ឆេទ",
        "Select date range": "ជ្រើសរើសជួរកាលបរិច្ឆេទ",
        "search": "ស្វែងរក",
        "No profit/loss data found": "រកមិនឃើញទិន្នន័យប្រាក់ចំណេញ/ខាត",
        "Total Profit": "ប្រាក់ចំណេញសរុប",
        "Total Loss": "ការខាតបង់សរុប",
        "Yes": "បាទ/ចាស",
        "Are you sure you want to delete?": "តើអ្នកប្រាកដទេថាចង់លុប?",
        "CSRF token missing": "ខ្វះ CSRF token ។ សូមផ្ទុកទំព័រឡើងវិញ។",
        "Please select at least one item": "សូមជ្រើសរើសយ៉ាងហោចណាស់មួយធាតុ",
        "No valid items selected": "គ្មានធាតុត្រឹមត្រូវត្រូវបានជ្រើសរើស",
        "Invalid item selected": "ធាតុដែលជ្រើសរើសមិនត្រឹមត្រូវ",
        "Records deleted successfully": "កំណត់ត្រាត្រូវបានលុបដោយជោគជ័យ",
        "Record deleted successfully": "កំណត់ត្រាត្រូវបានលុបដោយជោគជ័យ",
        "Deletion failed": "ការលុបបានបរាជ័យ",
        "Error": "កំហុស",
        "Page": "ទំព័រ",
        "of": "នៃ",
        "Previous Page": "ទំព័រមុន",
        "Next Page": "ទំព័របន្ទាប់",
        "Profit": "ប្រាក់ចំណេញ",
        "Loss": "ការខាតបង់",
        "Product Image": "រូបភាពផលិតផល",
        "Select All": "ជ្រើសរើសទាំងអស់",
        "Select item": "ជ្រើសរើសធាតុ",
        // category
        "Add New Categories": "បន្ថែមប្រភេទថ្មី",
        "Create New Category": "បង្កើតប្រភេទថ្មី",
        "Category Name": "ឈ្មោះប្រភេទ",
        "Add category": "បន្ថែមប្រភេទ",
        "Edit Category": "កែសម្រួលប្រភេទ",
        "Update": "ធ្វើបច្ចុប្បន្នភាព", // Already exists
        "Category Names": "ឈ្មោះប្រភេទ",
        "Action": "សកម្មភាព", // Already exists
        "Confirm Delete Category": "តើអ្នកប្រាកដទេថាចង់លុបប្រភេទនេះ?",
        "Confirm Bulk Delete Categories": "តើអ្នកប្រាកដទេថាចង់លុបប្រភេទដែលបានជ្រើស?",
        "Please Select Categories": "សូមជ្រើសរើសប្រភេទដើម្បីលុប។",

        // New keys for settings page
        "Personal Account": "គណនីផ្ទាល់ខ្លួន",
        "Profile": "ប្រវត្តិរូប",
        "Language": "ភាសា",
        "Username": "ឈ្មោះអ្នកប្រើ",
        "Store Name": "ឈ្មោះហាង",
        "Password": "លេខសម្ងាត់",
        "Email": "អ៊ីមែល",
        "No admin users found": "រកមិនឃើញអ្នកគ្រប់គ្រង",
        "No Logo": "គ្មាននិមិត្តសញ្ញា",
        // Keys from purchases page
        "Purchasing_Orders": "ការបញ្ជាទិញ",
        "Add_Products": "បន្ថែមផលិតផល",
        "Image": "រូបភាព",
        "Product Name": "ឈ្មោះផលិតផល",
        "Action": "សកម្មភាព",
        "No_Purchases_Found": "រកមិនឃើញការបញ្ជាទិញ។",
        "Confirm_Bulk_Delete": "តើអ្នកប្រាកដទេថាចង់លុបផលិតផលទាំងអស់ដែលបានជ្រើស?",

        "No": "ទេ",
        "Delete_Selected": "លុបផលិតផលដែលបានជ្រើស",
        "Confirm_Delete_Item": "តើអ្នកប្រាកដទេថាចង់លុបធាតុនេះ?",
        "Delete_Item": "លុបធាតុ",
        "Update failed": "បរាជ័យក្នុងការធ្វើបច្ចុប្បន្នភាព",
        "Bulk delete failed": "បរាជ័យក្នុងការលុបច្រើន",

        // inventory create
        Product_Name: "ឈ្មោះផលិតផល",
        Product_Image: "រូបភាពផលិតផល",
        Selling_Price: "លក់តម្លៃ",
        Actions: "សកម្មភាព",
        Result_Type: "ប្រភេទលទ្ធផល",
        This_Week: "សប្តាហ៍នេះ",

    },
};

function applyTranslations(lang) {
    // Update current language display
    document.getElementById("currentLanguage").textContent =
        translations[lang]["English"];

    // Update text content for elements with data-translate-key
    document.querySelectorAll("[data-translate-key]").forEach((element) => {
        const key = element.getAttribute("data-translate-key");
        if (translations[lang][key]) {
            if (element.tagName === "INPUT" && element.hasAttribute("placeholder")) {
                element.placeholder = translations[lang][key];
            } else if (element.tagName === "OPTION") {
                element.textContent = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });

    // Update category select option
    const categorySelect = document.getElementById("categorySelect");
    if (categorySelect) {
        categorySelect.querySelector('option[value=""]').textContent =
            translations[lang]["Select Category"];
    }

    // Store selected language
    localStorage.setItem("selectedLanguage", lang);
}

document.addEventListener("DOMContentLoaded", () => {
    // Load saved language or default to English
    const savedLang = localStorage.getItem("selectedLanguage") || "en";
    applyTranslations(savedLang);

    // Handle language selection
    document.querySelectorAll("[data-lang]").forEach((link) => {
        link.addEventListener("click", (e) => {
            e.preventDefault();
            const lang = link.getAttribute("data-lang");
            applyTranslations(lang);
        });
    });
});